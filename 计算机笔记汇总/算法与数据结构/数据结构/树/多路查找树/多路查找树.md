![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.26.18.png]]

# 多叉树

## 概念

多叉树（也称为K叉树）是一种树形数据结构，其中**每个节点可以有多于两个的子节点**，并且允许每个节点可以有更多的数据项。

这与传统的二叉树不同，后者的每个节点最多只有两个子节点（左子节点和右子节点）。

在多叉树中，节点可以有任意数量的子节点，这使得它们在某些应用中非常灵活和有用。例如，在文件系统的表示、数据库索引以及某些决策树算法中，多叉树都非常常见。

  

# 2-3树

2-3树是最简单的B树结构

  

## 特性

2-3树是一种特殊类型的平衡多叉树，主要用于数据库和文件系统中。**它的特点是每个节点都可以有两个或三个子节点，这就是“2-3”这个名字的由来**。这种树的设计确保了在添加或删除元素时树的平衡性，从而保持了操作的高效性。

在2-3树中，有两种类型的节点：

1. **2节点**：这是最基本的节点类型，包含一个键（或元素）和两个子节点（如果有）。2节点可以被视为2-3树中的标准二叉树节点，其中每个节点有两个可能的子节点（左子节点和右子节点）。
2. **3节点**：这种节点包含两个键和三个子节点。在3节点中，左子节点的所有元素都小于节点中的较小键，中间子节点的所有元素都在两个键之间，右子节点的所有元素都大于节点中的较大键。

这两种类型的节点允许2-3树在插入和删除操作期间保持平衡。当向2-3树中插入或删除键时，树会通过分裂或合并节点来重新调整，以确保所有的叶子节点都保持在同一层级，从而维持树的平衡。这种结构的平衡特性确保了在最坏情况下搜索、插入和删除操作的时间复杂度均为O(log n)，其中n是树中元素的数量。

**2-3树是由二节点和三节点构成的树**

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8810.47.16.png]]

  

## 2-3树应用案例

## 构建2-3树

- 2-3树的所有叶子节点都在同一层 (只要是B树都满足这个条件）
- 二节点要么没有子节点，要么有两个子节点
- 三节点要么没有子节点，要么有三个子节点
- 当按照规则插入一个数到某个节点时，不能满足上面三个要求，就需要拆。先向上拆，如果上层满，则拆本层。拆了之后仍然需要满足上面3个条件
- 对于三节点的子树的值大小仍然遵守 (BST 二叉排序树)的规则

# 2-3-4树

概念与23树相似，也是一种B树

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.29.54.png]]

  

> [!info] 平衡二叉树、B树、B+树、B*树 理解其中一种你就都明白了  
> 1、从二分法到二叉树二分法是我们常用的一种查找算法，可以有效的提升数据找找的效率，其实现思路是： 1、首先对数据集进行排序。 2、找到数据集中间位置的节点。 3、用查找的条件和中间节点进行比较，等于则直接…  
> [https://zhuanlan.zhihu.com/p/27700617](https://zhuanlan.zhihu.com/p/27700617)  

# B树

B树和B+树是用于数据库索引和文件系统的两种平衡多叉树数据结构。它们被设计用于有效地在磁盘上存储和检索数据，特别是在处理大量数据时。

这两种结构通过减少访问磁盘的次数来提高性能，因为磁盘I/O操作通常比内存操作要慢得多。

B树是一种自平衡树，它允许节点有多个子节点，从而减少树的高度，并优化磁盘I/O操作。B树的特点包括：

- **节点最大和最小子节点数**：B树的每个节点都有最大和最小子节点数的限制。这个最大子节点数通常称为B树的阶（order）。
- **键和子节点的排序**：每个节点包含一定数量的键，这些键以排序的方式存储，并用于导航树。
- **所有叶子节点在同一层**：B树通过分裂和合并节点以保持平衡，确保所有叶子节点都位于同一层。

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.33.01.png]]

  

# B+树

B+树是B树的一个变体，广泛用于数据库和操作系统中，具有以下特点：

- **只在叶子节点存储数据**：B+树的所有数据值和指向数据记录的指针都存储在叶子节点中。内部节点只存储键值，用于导航。
- **叶子节点的链表**：B+树的叶子节点按键顺序链接在一起，这为全范围扫描提供了优化，使得按顺序访问数据变得更加高效。
- **更多键值**：由于内部节点不存储数据，B+树可以在同样大小的节点中存储更多的键。

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.34.06.png]]

  

# B树与B+树的比较

- **数据访问**：B树可以在任何找到的节点中直接访问数据，而**B+树只在叶子节点中存储数据**。
- **范围查询效率**：B+树的范围查询更高效，因为它的叶子节点形成了一个有序链表。
- **存储效率**：B+树通常可以存储更多的键，因为它的内部节点不包含实际的数据。
- **树的平衡性**：B树和B+树都是自平衡的，保证了操作的高效性。

B树和B+树在数据库索引和文件系统中非常重要，因为它们提供了高效的查找、插入和删除操作，特别是在处理大量数据时。

# B*树

B*树是B+树的变体，在B+树的**非根和非叶子节点再增加指向兄弟的指针**

在B树中，当一个节点达到最大容量时，它会分裂成两个节点，每个节点包含一半的键。而在B*树中，节点在达到最大容量时会尝试将一些键移到相邻的兄弟节点。只有当兄弟节点也满时，节点才会分裂。在这种情况下，原节点和兄弟节点的内容将被平均分配到三个节点中，而不是两个。

因此，B*树的主要特点包括：

1. **高空间利用率**：B*树通过重新分配键来尽可能避免节点分裂，从而提高了节点的利用率。通常，非根节点至少要被填充到2/3而不是1/2。
2. **节点分裂**：当节点最终需要分裂时，它的键被平均分配到三个节点中，而不是两个。这样做减少了树的高度，进而减少了访问数据时需要的磁盘I/O操作。
3. **性能**：由于节点的高度填充度和较低的树高度，B*树在搜索、插入和删除操作上通常比标准的B树更高效。

B*树继承了B树的平衡特性，并且通过改进节点分裂策略，提高了空间效率。这使得它们在某些数据库和文件系统实现中是一种更受欢迎的选择。然而，由于节点分裂和合并的复杂性增加，它们在实现上可能比标准的B树更复杂。

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.34.54.png]]

![[%E6%88%AA%E5%B1%8F2024-01-11_%E4%B8%8B%E5%8D%8811.35.58.png]]