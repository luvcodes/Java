# StringBuilder

StringBuilder 是 Java 中的一个可变字符序列。与不可变的 String 类不同，**StringBuilder 允许更改、添加或删除字符**，而**不会像 String 操作那样每次都生成一个新的对象**。这使得 StringBuilder 在处理大量的字符串操作时更加高效，特别是在进行字符串拼接的时候。
## 关键特性

- 可变性：可以在**不创建新对象的情况下修改字符串**。
- 性能：比使用 String 进行多次串联操作更高效。
- 非线程安全：与 StringBuffer 相比，StringBuilder 不是线程安全的，但在单线程环境下性能更好。
## 常用方法

[![](https://cdn.nlark.com/yuque/0/2024/png/38953059/1707403829733-3637a799-b708-44d6-8ed2-3fb44c8b63b0.png)](https://cdn.nlark.com/yuque/0/2024/png/38953059/1707403829733-3637a799-b708-44d6-8ed2-3fb44c8b63b0.png)

1. 构造方法：
	- StringBuilder ()：构造一个无字符的字符串构建器。
	- StringBuilder (int capacity)：构造一个指定初始容量的字符串构建器。
	- StringBuilder (String str)：构造一个初始化为指定字符串内容的字符串构建器。

2. 添加和插入：
	- Append (...)：将参数添加到序列的末尾。这个方法有多个重载形式，可以接受不同类型的数据（如 int, long, String, char 等）。
	- Insert (int offset, ...)：在指定位置插入参数。这个方法也有多个重载形式，允许插入不同类型的数据。

3. 删除和替换：

	- Delete (int start, int end)：删除序列中从 start 到 end 位置之间的内容。
	- DeleteCharAt (int index)：删除指定位置的字符。
	- Replace (int start, int end, String str)：使用给定的字符串替换序列中从 start 到 end 位置之间的内容。

4. 反转和长度：

	- Reverse ()：将此字符序列用其反转形式取代。
	- Length ()：返回当前长度（字符数）。
	- SetLength (int newLength)：设置字符序列的长度。

5. 其他功能：

	- ToString ()：将字符序列转换为 String。
	- CharAt (int index)：返回指定位置的字符。
	- Substring (int start, int end)：返回一个新的 String，它包含此序列中从 start 到 end 位置的字符。

## 使用示例

```Java
StringBuilder sb = new StringBuilder("Hello");
sb.append(" World"); // 现在字符串为 "Hello World"
sb.insert(6, "Java "); // 现在字符串为 "Hello Java World"
sb.delete(6, 11); // 删除 "Java "，现在字符串为 "Hello World"
sb.replace(6, 11, "Earth"); // 替换 "World" 为 "Earth"，现在字符串为 "Hello Earth"
sb.reverse(); // 字符串反转，现在字符串为 "htraE olleH"
String result = sb.toString(); // 转换为String
```

这些是 StringBuilder 最常用的方法和基本用法。使用 StringBuilder 可以显著提高在循环或频繁操作中字符串拼接的效率。

# String、StringBuffer 和 StringBuilder 区别？

**StringBuilder 和 StringBuffer 都是 Java 中用于处理字符串的类**，它们**提供了在字符串上执行修改操作的方法**，如添加、删除和替换字符。但它们之间存在一些关键的差异：

1. StringBuilder：

- **不是线程安全的**：这意味着在多线程环境中，多个线程可以同时修改一个 StringBuilder 对象，可能导致数据不一致。StringBuilder 在修改字符串时，会尽量复用已有的字符数组，避免重新分配内存，因此性能较好。
- 由于其非线程安全性，**性能**通常比 StringBuffer**更好**，因为它不需要进行同步操作。
- 在单线程环境中，**如果不需要线程安全，通常建议使用 StringBuilder**。

1. StringBuffer：

- 是**线程安全**的：StringBuffer 内部的方法大多数都是同步的，这意味着在多线程环境中，只有一个线程可以在特定时间内修改 StringBuffer 对象，因此性能较差。
- 由于其线程安全性，**性能**可能比 StringBuilder 稍**差**，因为它需要进行同步操作。
- 如果需要在多线程环境中操作字符串，建议使用 StringBuffer。
- StringBuffer 使用构造器创建初始是开创一块 size 为 16 的 char 类型的数组

```Java
// 构造器的使用:
// 1. 创建一个 大小为16的 char[], 用于存放字符内容
StringBuffer stringBuffer = new StringBuffer();

// 2. 通过构造器指定 char[] 大小
StringBuffer stringBuffer1 = new StringBuffer(100);

// 3. 通过给一个String 创建 StringBuffer, char[] 大小就是str.length() + 16
StringBuffer stringBuffer2 = new StringBuffer("hello");
```

1. String:

- 在**修改字符串时，会创建一个新的 String 对象**，并**将原来的对象引用指向新的对象**。因此，String 的性能最佳，但在修改字符串时会产生额外的开销，造成资源浪费。

## 为什么需要它们？

在 Java 中，String 对象是不可变的，这意味着一旦创建了一个 String 对象，就不能更改它。如果需要频繁地修改字符串，例如在循环中添加、删除或替换字符，使用 String 可能会导致性能问题，因为每次修改都会创建一个新的 String 对象。而 StringBuilder 和 StringBuffer 提供了一种可变的方式来处理字符串，使得字符串的修改更加高效。

如果需要多线程访问字符串，则应使用 StringBuffer；

如果不需要多线程访问字符串，但需要频繁修改字符串，则应使用 StringBuilder；

如果不需要频繁修改字符串，则应使用 String。

总体来说，如果不需要线程安全，StringBuilder 通常是更好的选择，因为它提供了与 StringBuffer 相似的 API，但由于没有同步机制，所以更快。如果需要线程安全，StringBuffer 是更好的选择。

# StringJoiner

String 直接创建效率低，StringBuilder 代码复杂。引出 StringJoiner。

- StringJoiner 跟 StringBuilder 一样，也可以看成是一个容器，创建之后里面的内容是可变的。
- 作用：提高字符串的操作效率，而且代码编写特别简洁，但是目前市场上很少有人用。
- JDK 8 出现的

基本使用：

```Java
//1.创建一个对象，并指定中间的间隔符号
StringJoiner sj = new StringJoiner("---");
//2.添加元素
sj.add("aaa").add("bbb").add("ccc");
//3.打印结果
System.out.println(sj);//aaa---bbb---ccc
```

```Java
//1.创建对象
StringJoiner sj = new StringJoiner(", ","[","]");
//2.添加元素
sj.add("aaa").add("bbb").add("ccc");
int len = sj.length();
System.out.println(len);//15
//3.打印
System.out.println(sj);//[aaa, bbb, ccc]
String str = sj.toString();
System.out.println(str);//[aaa, bbb, ccc]
```

## 对比 StringJoiner 和 StringBuilder

**功能**

- **StringBuilder** 主要用于**修改**现有字符串。它提供了一系列方法来追加、插入和删除字符或子字符串。**StringBuilder 是可变的**，这意味着它的内容可以被修改。
- **StringJoiner** 主要用于**连接**多个字符串。它提供了一个 `add()` 方法来添加字符串，并允许指定分隔符和前缀/后缀。**StringJoiner 是不可变的**，这意味着一旦创建就不能修改其内容。

**性能**

- **StringBuilder** 通常比 StringJoiner 更快，因为它避免了创建新的字符串对象。在循环中拼接字符串时，这尤其重要。
- **StringJoiner** 在需要在字符串之间插入分隔符或前缀/后缀的情况下更有效。

**线程安全性**

- **StringBuilder** 是非线程安全的，这意味着多个线程不能同时修改同一个 StringBuilder 对象。如果需要在多线程环境中使用 StringBuilder，则必须使用同步机制。
- **StringJoiner** 是线程安全的，这意味着多个线程可以安全地同时使用同一个 StringJoiner 对象。

**其他**

- **StringBuilder** 可以用于更复杂的字符串操作，例如反转字符串或替换子字符串。
- **StringJoiner** 更易于使用，因为它具有更简单的 API。

**总结**

|   |   |   |
|---|---|---|
|**特性**|**StringBuilder**|**StringJoiner**|
|主要用途|修改现有字符串|连接多个字符串|
|性能|通常更快|在需要分隔符/前缀/后缀时更有效|
|线程安全性|非线程安全|线程安全|
|其他|可用于更复杂的字符串操作|更易于使用|

## **选择哪一个？**

在大多数情况下，**StringBuilder** 是拼接字符串的更好选择。它更快、更灵活，并且可以用于更复杂的字符串操作。但是，如果需要在字符串之间插入分隔符或前缀/后缀，或者需要在多线程环境中使用，则 **StringJoiner** 可能是更好的选择。

- **使用 StringBuilder** 用于以下情况：
    - 需要修改现有字符串
    - 在循环中拼接字符串
    - 需要执行更复杂的字符串操作
- **使用 StringJoiner** 用于以下情况：
    - 需要连接多个字符串
    - 需要在字符串之间插入分隔符或前缀/后缀
    - 需要在多线程环境中使用字符串拼接