为了演示多级缓存的案例，我们先准备一个商品查询的业务。

## 2.1.导入案例

参考课前资料的：《案例导入说明.md》

![[Pasted image 20240517084414.png|100]]

## 2.2. 初识Caffeine

缓存在日常开发中启动至关重要的作用，由于是存储在内存中，数据的读取速度是非常快的，能大量减少对数据库的访问，减少数据库的压力。我们把缓存分为两类：

- 分布式缓存，例如Redis：
    
    - 优点：存储容量更大、可靠性更好、可以在集群间共享
        
    - 缺点：访问缓存有网络开销
        
    - 场景：缓存数据量较大、可靠性要求较高、需要在集群间共享

- 进程本地缓存，例如HashMap、GuavaCache：
    
    - 优点：读取本地内存，没有网络开销，速度更快
        
    - 缺点：存储容量有限、可靠性较低、无法共享
        
    - 场景：性能要求较高，缓存数据量较小


我们今天会利用Caffeine框架来实现JVM进程缓存。

**Caffeine**是一个基于Java8开发的，提供了近乎最佳命中率的高性能的本地缓存库。目前Spring内部的缓存使用的就是Caffeine。GitHub地址：[https://github.com/ben-manes/caffeine](https://github.com/ben-manes/caffeine)

Caffeine的性能非常好，下图是官方给出的性能对比：

![[Pasted image 20240517084449.png]]

可以看到Caffeine的性能遥遥领先！

缓存使用的基本API：

