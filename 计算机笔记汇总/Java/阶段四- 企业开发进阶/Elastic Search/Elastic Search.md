# 文档和词条

文档: 一条数据就是一个文档。这些文档是以**JSON格式存储**的。

词条: 对文档中的内容进行分词，得到的词语就是词条。在创建索引时，Elasticsearch会将文档中的文本内容拆分成一个个的词条，这个过程称为分词（Tokenization）。词条是构建倒排索引的基础，倒排索引是Elasticsearch进行快速搜索的关键。每个词条都与指向包含该词条的文档的指针列表相关联。这意味着当你搜索一个特定词条时，Elasticsearch可以快速找到包含该词条的所有文档。

# 正排索引和倒排索引

1. **正排索引（Forward Index）**：正排索引是一种简单直接的索引方法。在这种方法中，每个文档被分配一个唯一的ID，索引就是按照这个ID来组织的。你可以想象成一个目录，每一页列出了一个文档的所有内容（比如，所有的词）。所以，如果你知道文档的ID，你就可以很快找到这个文档的所有内容。但是，如果你要找的是一个特定的词，你可能需要查看每个文档，看看这个词是否出现在其中，这可能会很慢。
2. **倒排索引（Inverted Index）**：倒排索引是为快速文本搜索而设计的。在倒排索引中，索引的构建是以词为中心的。它创建了一个词的列表，对于每个词，都列出了包含该词的所有文档的ID。这就像是一本书的词汇索引，你可以快速查到每个词出现在哪些页面上。在搜索时，这种方法可以非常快速地找到包含特定词的所有文档，因为它直接告诉你这些文档的ID。

# MySQL对比ES

![[/Untitled 14.png|Untitled 14.png]]

# Kibana

kibana可以给我们提供一个elasticsearch的可视化界面

# 分词器analyzer

IK分词器

分词器的作用是什么？

- 创建倒排索引时对文档分词
- 用户搜索时，对输入的内容分词

IK分词器有几种模式？

- ik_smart：智能切分，粗粒度
- ik_max_word：最细切分，细粒度

IK分词器如何拓展词条？如何停用词条？T

- 利用config目录的IkAnalyzer.cfg.xml文件添加拓展词典和停用词典
- 在词典中添加拓展词条或者停用词条

# 索引库

**索引库就类似数据库表，mapping映射就类似表的结构**。

我们要向es中存储数据，必须先创建“库”和“表”。

## **2.1.mapping映射属性**

mapping是对索引库中文档的约束，**常见的mapping属性**包括：

- type：字段数据类型，常见的简单类型有：
    - 字符串：text（可分词的文本）、keyword（精确值，例如：品牌、国家、ip地址）
    - 数值：long、integer、short、byte、double、float、
    - 布尔：boolean
    - 日期：date
    - 对象：object
- index：是否创建索引，默认为true
- analyzer：使用哪种分词器
- properties：该字段的子字段

## 2.2 索引库的CRUD

### 修改字段

倒排索引结构虽然不复杂，但是一旦数据结构改变（比如改变了分词器），就需要重新创建倒排索引，这简直是灾难。因此索引库**一旦创建，无法修改mapping，也就是说不能修改现有的字段。**

虽然无法修改mapping中已有的字段，但是却允许添加新的字段到mapping中，因为不会对倒排索引产生影响。

# **3.文档操作**

## 增删改查文档

## 批量操作文档

# 4. RestAPI

## 使用Mapping

## 增删索引库

# 5. RestClient操作文档

## 增删改查文档

## 批量导入文档

  

# 6. DSL查询文档

```JSON
GET /indexName/_search
{
  "query": {
    "查询类型": {
      "查询条件": "条件值"
    }
  }
}
```

  

# 7. **搜索结果处理**

  

  

# 8. 数据聚合

  

  

# 9. 自动补全

  

# 10. 数据同步

  

# 11. 集群