# 第三方资源配置管理

```Java
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
  <property name="driverClass" value="com.mysql.jdbc.Driver" />
  <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/spring_db" />
  <property name="user" value="root" />
  <property name="password" value="123456" />
</bean>
```

```Java
public class App {
    public static void main(String[] args) {
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
        DataSource dataSource = (DataSource) ctx.getBean("dataSource");
        System.out.println(dataSource);
    }
}
```

在这个代码示例中，Spring Framework 通过 XML 配置文件（通常为 ``applicationContext.xml``）来初始化一个 ``ComboPooledDataSource`` 对象。这个对象用于管理数据库连接。

当你运行 `App` 类的 `main` 方法时，Spring 容器会启动并尝试创建一个 ``dataSource`` bean。这个过程包括加载 JDBC 驱动并准备好连接到数据库。但是，实际的数据库连接在这个阶段并没有建立。

这就是为什么即使数据库 ``spring_db`` 不存在，``System.out.println(dataSource);`` 仍然可以输出内容的原因。``dataSource`` 对象已经被成功创建，但**还没有尝试与数据库建立实际连接**。

如果你尝试使用这个 ``dataSource`` 对象进行数据库操作（例如，执行 SQL 查询），那么在这一点上，它将尝试建立实际的数据库连接，并且如果 ``spring_db`` 数据库不存在，将会抛出异常。

### **为什么它代表了“实际的数据库连接在这个阶段没有建立”？**

在 Spring Framework 中，``DataSource`` 是一个用于封装数据库连接信息的对象。当你在 XML 配置文件中定义了一个 ``DataSource`` bean，Spring 容器会根据这些配置信息实例化一个 ``DataSource`` 对象。这个对象包含了如何连接到数据库的所有必要信息（例如，数据库 URL、用户名、密码等）。

然而，重要的是要理解，仅仅创建了 ``DataSource`` 对象并不意味着已经建立了与数据库的实际连接。**`**`**DataSource**`**` 对象更像是一个数据库连接的工厂，而不是一个实际的数据库连接。**

**实际的数据库连接通常是在你执行数据库操作（如查询或更新）的时候才会被建立**。这是一种称为“延迟连接”或“惰性连接”（Lazy Connection）的机制。这种机制允许系统更加高效地管理数据库资源，因为只有在实际需要时才会建立数据库连接。

所以，在你的代码示例中，即使数据库 ``spring_db`` 不存在，``System.out.println(dataSource);`` 依然可以输出内容，因为**这一行代码仅仅是打印了 `**`**DataSource**`**` 对象的信息，而没有尝试执行任何数据库操作。因此，没有触发实际的数据库连接建立过程。**

如果你尝试使用这个 ``DataSource`` 对象来执行实际的数据库操作，那么在那一刻，它会尝试建立与数据库的实际连接。如果数据库不存在，这时你会收到一个异常。

# 加载Properties文件

```XML
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
```

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1696378859822-def93f5a-dfca-46f6-97b1-22abd26e6149.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1696378859822-def93f5a-dfca-46f6-97b1-22abd26e6149.png)

# 使用外部数据库连接配置文件

```XML
    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">
        <property name="driverClassName" value="${jdbc.driver}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>
```

```Plain
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://127.0.0.1:3306/spring_db
jdbc.username=root
jdbc.password=123456
```