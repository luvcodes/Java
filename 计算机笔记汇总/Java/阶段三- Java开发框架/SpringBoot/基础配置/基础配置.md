# 配置格式

## SpringBoot提供了多种属性配置方式

`application.properties`

```YAML
server.port=80
```

`application.yml`

```YAML
server:
	port: 81
```

`application.yaml`

```YAML
server:
	port: 82
```

如果这三种方式都存在，那么就是依次像上面这样排序**优先级**

**以后主要使用application.yml文件来进行配置**

![[/Untitled 24.png|Untitled 24.png]]

  

虽然springboot支持多种格式配置文件，但是在项目开发时，推荐统一使用一种格式的配置。（yml是主流）

# yaml语法规则

- 大小写敏感
- 属性层级关系使用多行描述，每行结尾使用冒号结束
- 使用锁紧表示层级关系，同层级左侧对齐，只允许使用空格 (不允许使用Tab键)
- 属性值前面添加空格
- '#' 表示注释

注意属性名冒号后面与数据之间有一个空格

## 字面值表示方式

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699761122793-7e315273-cb03-465f-bea2-a880b73090d8.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699761122793-7e315273-cb03-465f-bea2-a880b73090d8.png)

## 数组表示方式

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699761165170-0a714a1e-9499-42f9-aae3-027f5d0633d0.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699761165170-0a714a1e-9499-42f9-aae3-027f5d0633d0.png)

# yaml数据读取

## 使用@Value读取单个数据，属性名引用方式

`${一级属性名.二级属性名}`

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698453864206-a6d01a01-9d14-4d48-8252-019503c4f5f2.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698453864206-a6d01a01-9d14-4d48-8252-019503c4f5f2.png)

## 封装全部数据到Environment对象

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698453955362-b735699a-493e-4ded-8501-f85f4ee6de51.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698453955362-b735699a-493e-4ded-8501-f85f4ee6de51.png)

## 自定义对象封装指定数据

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698454077470-fe79803d-40f9-454a-ae7a-d303c90627ef.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698454077470-fe79803d-40f9-454a-ae7a-d303c90627ef.png)

# 多环境启动

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698455217857-570a8c94-f324-47ce-8db0-db8f9430d77c.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698455217857-570a8c94-f324-47ce-8db0-db8f9430d77c.png)

## properties多文件多环境启动

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698455321776-2668797d-f637-4fcb-affd-c89b2f7cc305.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698455321776-2668797d-f637-4fcb-affd-c89b2f7cc305.png)

## 多环境启动命令格式

带参数启动springboot

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698493414584-f167b2e0-a763-4f23-bab3-1d99c2377821.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698493414584-f167b2e0-a763-4f23-bab3-1d99c2377821.png)

# 多环境开发控制

## Maven与SpringBoot多环境兼容

### 1. Maven中设置多环境

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698494946619-41e0116a-cf56-4c1e-af90-cc4e3e462ac4.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698494946619-41e0116a-cf56-4c1e-af90-cc4e3e462ac4.png)

### 2. SpringBoot中设置多环境

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495010424-42adf44a-1650-4e47-a681-42166f2059f6.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495010424-42adf44a-1650-4e47-a681-42166f2059f6.png)

### 3. 进行解析

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495123040-04aad3f2-f2de-493b-9818-c0b7af01fa76.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495123040-04aad3f2-f2de-493b-9818-c0b7af01fa76.png)

### 4. 对资源文件默认占位符进行解析

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495065082-f6e2ff66-5438-46a4-8ad7-396616b56b97.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1698495065082-f6e2ff66-5438-46a4-8ad7-396616b56b97.png)

Maven和SpringBoot进行多环境设置的时候，**SpringBoot要听从Maven的设定，**Maven传递过去一个属性，要注意解析`${profile.active}`

# 配置文件分类

创建两个application.yml文件

一个在resources/config/application.yml

```YAML
server:
  port: 81
```

另一个就在resources目录下

```YAML
server:
  port: 80
```

**优先级是第一个**, 也就是在config文件夹下面的优先级更高。

## 4级配置文件

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699773164523-b13ec922-f27d-4997-97b1-3ed08856e0c7.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1699773164523-b13ec922-f27d-4997-97b1-3ed08856e0c7.png)