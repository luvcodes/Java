# 自动配置原理

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1702784577089-cd1e8cc9-b4e4-453c-9bb8-b43726750dba.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1702784577089-cd1e8cc9-b4e4-453c-9bb8-b43726750dba.png)

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1702793226992-d798ca27-d89a-4744-b381-bcad41236772.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1702793226992-d798ca27-d89a-4744-b381-bcad41236772.png)

自动配置主要是由Spring Boot提供和处理的，而不是由开发者手动创建。当你使用Spring Boot创建项目时，它会自动配置大多数常见的功能，这是Spring Boot的一个关键特性，旨在简化Spring应用程序的配置。以下是有关自动配置如何工作的一些关键点：

### 1. **Spring Boot的自动配置**

Spring Boot自动配置尝试根据你添加到项目中的依赖（即你的Maven或Gradle构建文件中的内容）来配置你的Spring应用程序。例如，如果你添加了Spring Boot的Web Starter，Spring Boot会自动配置所有必要的组件来开发一个Web应用，如内嵌的Tomcat服务器、Spring MVC等。

### 2. `**@EnableAutoConfiguration**`**或**`**@SpringBootApplication**`

在Spring Boot应用的入口类上，你通常会有一个`@SpringBootApplication`注解，它是以下三个注解的组合：

- `@SpringBootConfiguration`：标识这是一个Spring Boot配置类。
- `@EnableAutoConfiguration`：告诉Spring Boot自动配置应用程序。
- `@ComponentScan`：告诉Spring在指定的包中查找其他组件、配置和服务。

通过这个注解，Spring Boot自动配置就会被激活。

### 3. **自定义和覆盖自动配置**

虽然Spring Boot提供了许多默认的自动配置，但你仍然可以自定义或覆盖这些配置。例如，通过添加自己的`@Bean`定义，你可以覆盖默认的自动配置，或者通过`application.properties`或`application.yml`文件来自定义配置属性。

### 4. **条件注解**

Spring Boot的自动配置使用一系列的条件注解（如`@ConditionalOnClass`、`@ConditionalOnMissingBean`等），这些注解确保只有在特定条件满足时，相关的自动配置才会应用。

### 总结

总的来说，自动配置主要是Spring Boot处理的，作为开发者，你不需要编写传统的Spring配置代码。你的角色更多地是选择合适的起步依赖，以及根据需要自定义和调整自动配置。这大大简化了Spring应用的配置过程，使你可以更快地开始编写业务逻辑代码。

# 面试问题: 自动配置原理

[https://www.cnblogs.com/uncleyong/p/17067567.html](https://www.cnblogs.com/uncleyong/p/17067567.html)

[https://zhuanlan.zhihu.com/p/163685081](https://zhuanlan.zhihu.com/p/163685081)

[https://cloud.tencent.com/developer/article/2121214](https://cloud.tencent.com/developer/article/2121214)

当然可以。下面是一段关于Spring Boot自动配置的综合总结，你可以用它来准备面试：

在Spring Boot中，`@SpringBootApplication`注解是一个核心的启动注解，它整合了`@Configuration`、`@EnableAutoConfiguration`和`@ComponentScan`。其中，`@EnableAutoConfiguration`是自动配置的关键，@EnableAutoConfiguration注解找到方法getCandidateConfigurations找到所有需要自动配置类的集合，以List集合返回，自动配置类存储在META-INF/spring.factories配置文件中，从`META-INF/spring.factories`文件中读取并加载所有的自动配置类，这些自动配置类以`AutoConfiguration`结尾，它们基于应用的依赖和环境条件向Spring容器中添加组件。

另外，与自动配置紧密相关的是`@ConfigurationProperties`注解，它用于将`application.properties`或`application.yml`这种外部的配置文件中的配置属性绑定到带有此注解的类上，从而实现配置的外部化和定制化。例如，可以通过修改`application.yml`中的`server.port`来更改应用的服务端口。这种自动配置机制极大地简化了Spring应用的配置过程，提高了开发效率，同时也保留了足够的灵活性来覆盖或定制默认配置。