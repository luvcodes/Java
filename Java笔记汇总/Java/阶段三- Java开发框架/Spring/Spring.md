# 核心概念

# IoC (Inversion of Control) 控制反转

Inversion of Control (IoC) 是一种编程原则和设计模式，用于减少代码之间的耦合。控制反转（IoC）是指将创建和管理对象的控制从程序的主要逻辑中转移到外部容器或框架中。在传统的编程中，程序的主要逻辑通常负责创建和管理对象。但在IoC中，这种责任被反转了，不再是由主要逻辑来控制，而是由外部容器或框架来控制。

**IoC的常见实现方式是通过依赖注入（Dependency Injection, DI）**。依赖注入是一种允许外部容器或框架为对象提供其依赖项的方法。

简单来说，**控制反转是为了提高代码的模块化和可测试性**，通过**将控制权从主程序转移到外部容器或框架**，从而使各个模块之间的依赖关系变得更加清晰和灵活。

**Spring提供了一个容器，称为IoC容器**，用来充当IoC思想中的“外部”。IoC容器负责对象的创建、初始化等一系列工作，被创建或被管理的**对象**在IoC容器中统称为**Bean**

# DI (Dependency Injection) 依赖注入

**在容器中建立bean与bean之间的依赖关系的整个过程，称为依赖注入。**

[![](https://cdn.nlark.com/yuque/0/2023/png/38953059/1696220560154-1d71ad44-cfdd-4e2a-a42f-b3f77c9ac89c.png)](https://cdn.nlark.com/yuque/0/2023/png/38953059/1696220560154-1d71ad44-cfdd-4e2a-a42f-b3f77c9ac89c.png)

简单来说，依赖注入就是让一个对象获得它所依赖的其他对象，而不是由这个对象自己去创建或查找依赖的对象。这通常通过构造函数、方法参数或者注解等方式来实现。

举个例子，假设你有一个类A，它需要使用另一个类B的功能。在依赖注入中，你不需要在类A中自己创建类B的实例，而是由外部系统或者框架负责将类B的实例传递给类A。这样，类A就不用关心如何创建类B，它只需要专注于自己的业务逻辑。

**目标: 充分解耦**

- 使用IoC容器管理bean (IoC)
- 在IoC容器内将由依赖关系的bean进行关系绑定 (DI)

最终效果: 使用对象时不仅可以直接从IoC容器中获取，并且获取到的bean已经绑定了所有的依赖关系

# IOC、DI 和 Bean 的关系

1. **IOC（控制反转）**: IOC 是一个广泛的设计原则，**用于将对象的创建和管理从代码中解耦出来**。这通常是通过一个叫做 ApplicationContext 的容器来实现的。
2. **DI（依赖注入）**: DI 是实现 IoC 的一种具体方法。通过 DI，容器可以在运行时将依赖（即其他对象）注入到目标对象中。这样，目标对象不需要自己去创建和管理它所依赖的对象。
3. **Bean**: 在 Spring 框架中，**Bean 是由 Spring 容器管理的一个对象**。这个对象的创建、初始化、销毁等生命周期都是由 Spring 容器来控制的。**Bean 是 DI 的目标对象，也是 IoC 容器管理的实体**。

# 它们之间的关系

- **IOC 容器管理 Beans**: 在 Spring 中，IOC 容器（通常是 ApplicationContext）负责管理多个 Bean。这些 Bean 可以是服务类、数据源、业务逻辑类等。 IoC容器负责实例化、配置和组装beans。容器接收一个配置元数据（可以是XML、Java注解或Java代码），该元数据指示如何创建、配置和组装对象。Spring的IoC容器的核心接口是`ApplicationContext`，它提供了配置框架和基本功能，并能加载bean定义、创建bean实例和管理bean的生命周期和依赖。
- **DI 用于注入 Beans**: 当一个 Bean 依赖于其他 Beans 时，Spring 容器会通过依赖注入（DI）的方式，将这些依赖自动注入到目标 Bean 中。
- **Bean 是 DI 和 IOC 的实体**: 简单来说，Bean 就是在 Spring IOC 容器中被管理，并通过 DI 被注入的对象。 Bean是Spring管理的一个对象实例。这些对象是由Spring IoC容器实例化、组装和管理的。Bean可以是任何类型的对象，例如一个数据源、一个服务层的实例、一个持久化层的实例等。在Spring的配置文件或注解中，开发者可以定义一个Bean，并指定其属性和依赖关系。

简言之，IoC容器是管理beans的实体，而beans是被容器管理的对象。一个IoC容器中可以包含很多个bean。

[[Bean]]

[[Spring运行行为和顺序]]

[[依赖注入]]

[[依赖自动装配]]

[[集合注入]]

[[案例- 数据源对象管理]]

[[容器]]

[[注解开发]]

[[Spring整合MyBatis]]

[[Spring整合JUnit]]

[[AOP]]

[[Spring事务]]