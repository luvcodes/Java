# 会话

## 概念

会话: 用户打开浏览器，访问web服务器的资源，会话建立，直到有一方断开连接，会话结束。在一次会话中可以包含多次请求和响应。

比如：打开了浏览器来访问web服务器上的资源（浏览器不能关闭、服务器不能断开）

- 第1次：访问的是登录的接口，完成登录操作
- 第2次：访问的是部门管理接口，查询所有部门数据
- 第3次：访问的是员工管理接口，查询员工数据

只要浏览器和服务器都没有关闭，以上3次请求都属于一次会话当中完成的。

需要注意的是：**会话是和浏览器关联的**，当**有三个浏览器客户端和服务器建立了连接时，就会有三个会话**。

**同一个浏览器在未关闭之前请求了多次服务器，这多次请求是属于同一个会话**。比如：1、2、3这三个请求都是属于同一个会话。当我们关闭浏览器之后，这次会话就结束了。而如果我们是直接把web服务器关了，那么所有的会话就都结束了。

# 会话跟踪

## 概念

一种维护浏览器状态的方法，**服务器需要识别多次请求是否来自于同一浏览器**，以便在同一次会话的多次请求间共享数据。

服务器会接收很多的请求，但是服务器是需要识别出这些请求是不是同一个浏览器发出来的。比如：1和2这两个请求是不是同一个浏览器发出来的，3和5这两个请求不是同一个浏览器发出来的。如果是同一个浏览器发出来的，就说明是同一个会话。如果是不同的浏览器发出来的，就说明是不同的会话。

而识别多次请求是否来自于同一浏览器的过程，我们就称为会话跟踪。

会话跟踪是一种在多个请求或页面访问中保持用户数据的技术，用于在 Web 应用程序中识别和存储特定用户的状态。由于 HTTP 协议是无状态的，这意味着它默认情况下不保留用户的状态信息（例如，用户是否登录、用户的偏好设置等）。

因此，会话跟踪技术是用来“记住”用户在浏览网站时的活动和选择的。我们使用会话跟踪技术就是要完成在同一个会话中，多个请求之间进行共享数据。

会话跟踪技术有三种：

1. Cookie（客户端会话跟踪技术）

- 数据存储在客户端浏览器当中

1. Session（服务端会话跟踪技术）

- 数据存储在储在服务端

1. 令牌技术

## 为什么需要共享数据呢？

会话跟踪技术是为了保证一次会话中的多次请求可以共享数据。这个需求直接关联到HTTP协议的无状态性质。

HTTP协议是无状态的，意味着**每次请求都是独立的**，**服务器默认情况下不会记住之前的请求或响应**。**这种设计简化了HTTP协议的实现**，但同时**也带来了一些限制**，尤其是在需要维护用户状态的Web应用中。例如，一个在线购物网站需要跟踪用户的登录状态和购物车内容，但由于HTTP的无状态特性，每个请求都是独立的，服务器无法自然地知道这些请求是否来自同一个用户。

因此，需要**会话跟踪技术来克服HTTP的这一限制**，通过在服务器端跟踪会话，可以让多个请求之间共享数据。

# 会话跟踪方案

## 客户端会话跟踪技术: Cookie

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/chuangshiji-poapl/epb8vm/ovuxuc9k8q7g1dgi](https://www.yuque.com/chuangshiji-poapl/epb8vm/ovuxuc9k8q7g1dgi)

Cookie 是存储在用户浏览器中的小型数据片段。服务器可以发送一个 Cookie 到浏览器，浏览器会将其存储并在随后的请求中回传给服务器。这样，服务器可以识别用户和用户的状态。

## 服务端会话跟踪技术: Session

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/chuangshiji-poapl/epb8vm/ovuxuc9k8q7g1dgi](https://www.yuque.com/chuangshiji-poapl/epb8vm/ovuxuc9k8q7g1dgi)

Session 是服务器端的一种机制，它可以存储用户特定的信息。当用户访问一个网站时，服务器会为该用户创建一个唯一的会话，并为这个会话分配一个 ID。这个会话 ID 通常通过 Cookie 发送到用户的浏览器，以便在后续的请求中识别用户。

## 令牌技术

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/chuangshiji-poapl/epb8vm/urvbe8nsam6mheyl](https://www.yuque.com/chuangshiji-poapl/epb8vm/urvbe8nsam6mheyl)