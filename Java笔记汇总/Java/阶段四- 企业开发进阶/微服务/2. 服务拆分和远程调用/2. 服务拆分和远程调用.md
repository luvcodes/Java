# 跨服务远程调用

![[%E6%88%AA%E5%B1%8F2024-01-17_%E4%B8%8B%E5%8D%884.31.50.png]]

跨服务远程调用，通常是指在一个分布式系统或微服务架构中，不同的服务之间进行网络通信的过程。在这样的架构中，应用被拆分成许多小的、独立运行的服务，每个服务执行特定的业务功能，并且它们通常部署在不同的服务器或容器上。因此，**当一个服务需要与另一个服务交互或请求数据**时，就**需要通过网络进行远程调用**。

这里的“跨服务”强调的是服务之间的边界和独立性，而“远程调用”则指的是通过网络进行的调用，而不是在同一个内存空间中的本地调用。

使用跨服务远程调用的优点包括服务的独立部署和扩展、语言和技术栈的多样性、以及更好的容错性。然而，它也引入了网络延迟、数据序列化和反序列化的开销、以及分布式系统的复杂性（如服务发现、负载均衡、容错等）。因此，设计和实现跨服务调用时需要仔细考虑这些因素。

具体代码案例可见项目中的day01的代码，因为在网页中看order信息和user信息是在两个不同的服务器和数据库中查找到的，也是显示在不同的URL页面上的。那么，如果**想要在order信息的页面也能查看到user信息**，就需要进行**跨服务远程调用**

## 实现方法

![[%E6%88%AA%E5%B1%8F2024-01-17_%E4%B8%8B%E5%8D%884.34.07.png]]

## RestTemplate

使用`RestTemplate`实现远程调用在Spring应用中是一种流行的选择，主要有以下几个原因：

### 1. 易于使用和集成

- **Spring框架集成**：`RestTemplate`是Spring框架的一部分，与Spring的其他部分（如依赖注入、数据转换等）无缝集成。
- **简化代码**：`RestTemplate`提供了一系列便捷的方法来发起HTTP请求和处理响应，这使得开发者可以用很少的代码完成复杂的HTTP调用。

### 2. 强大的功能

- **数据绑定**：`RestTemplate`可以自动将HTTP响应转换为Java对象，也可以将Java对象转换为HTTP请求体，这极大地简化了数据处理。
- **错误处理**：它提供了错误处理的机制，可以捕获和处理HTTP请求过程中的错误。
- **多种数据格式支持**：支持多种数据格式，如JSON、XML等，方便与不同的API和服务进行交互。

## 提供者与消费者

- 服务提供者: 暴露接口给其他微服务调用
- 服务消费者: 调用其他微服务提供的接口
- 任何一个微服务既可以是提供者，也可以是消费者。这个概念是相对的

  

任何分布式架构都离不开服务的拆分，微服务也是一样。

## **2.1.服务拆分原则**

这里我总结了微服务拆分时的几个原则：

- 不同微服务，不要重复开发相同业务
- 微服务数据独立，不要访问其它微服务的数据库
- 微服务可以将自己的业务暴露为接口，供其它微服务调用

## **2.4.提供者与消费者**

在服务调用关系中，会有两个不同的角色：

**服务提供者**：一次业务中，被其它微服务调用的服务。（提供接口给其它微服务）

**服务消费者**：一次业务中，调用其它微服务的服务。（调用其它微服务提供的接口）

但是，服务提供者与服务消费者的角色并不是绝对的，而是相对于业务而言。

如果服务A调用了服务B，而服务B又调用了服务C，服务B的角色是什么？

- 对于A调用B的业务而言：A是服务消费者，B是服务提供者
- 对于B调用C的业务而言：B是服务消费者，C是服务提供者

因此，服务B既可以是服务提供者，也可以是服务消费者。